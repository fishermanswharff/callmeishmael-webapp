<section class="main-content">
  <header><h1>Phone Stats</h1></header>
  <p>Evaluate the lifespan of any phone ever fabricated by CMI. Use the search, sort and filter tools below to navigate to a specific phone. Use the admin table to change the status of any phone.</p>
  <div class="data-container">
    <div class="form-group">
      <label>Search by Venue</label>
      <input type='text' ng-model="search.venue.name" placeholder="Search by venue name">
    </div>
    <div class="form-group checkbox-group">
      <label>
        <input type="checkbox" ng-model="search.status" ng-true-value="'active'" ng-false-value="''">Active Phones
      </label>
      <label>
        <input type="checkbox" ng-model="search.status" ng-true-value="'inactive'" ng-false-value="''">
        Inactive Phones
      </label>
      <label>
        <input type="checkbox" ng-model="search.status" ng-true-value="'fixable'" ng-false-value="''">
        Fixable Phones
      </label>
      <label>
        <input type="checkbox" ng-model="search.status" ng-true-value="'retired'" ng-false-value="''">
        Retired Phones
      </label>
    </div>
    <table>
      <thead>
        <th>Phone ID</th>
        <th>Phone Status</th>
        <th>Name</th>
        <th># Stories</th>
        <th>Date Created</th>
        <th># Days Active</th>
        <th></th>
      </thead>
      <tbody>
        <tr ng-repeat="phone in dashboardController.phones | filter:search">
          <td><a ng-href="#/phone-stats/{{phone.id}}">{{phone.unique_identifier}}</td>
          <td>{{phone.status}}</td>
          <td>{{phone.venue.name}}</td>
          <td>{{phone.stories.length}}</td>
          <td>{{phone.created_at}}</td>
          <td>{{dashboardController.daysActive(phone)}}</td>
          <td><a href="javascript:void(0)" confirmed-click-action="dashboardController.deleteObject({phone: phone})" ng-confirm-click='Are you sure you want to delete the phone at {{phone.venue.name}}, with status {{phone.status}}?'>Delete</a></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="data-container phone-form grid_8" ng-controller='FormsController as formsController'>
    <h3>Add a New Phone</h3>
    <form name='phoneForm' id='phoneForm' ng-submit='formsController.submit({phone: formsController.phone})' novalidate>
      <div class="form-group">
        <label>Phone Status:
          <select id='phoneStatusSelect' class='select phone-status-list' ng-model='formsController.phone.status' required>
            <option value=''>-- choose status --</option>
            <option ng-repeat='status in formsController.phoneStatus' ng-model='formsController.phone.status'>{{status}}</option>
          </select>
        </label>
      </div>
      <div class="form-group">
        <label>Choose Venue
          <select id='venueForPhoneList' class='select venue-phone-list' ng-model='formsController.phone.venue_id' required>
            <!-- ng-options='venue.id as venue.name for venue in formsController.venues'  -->
            <option value="">-- choose venue --</option>
            <option ng-repeat='venue in formsController.venues' value='{{venue.id}}'>{{venue.name}}</option>
          </select>
        </label>
      </div>
      <div class="form-group">
        <input class='btn' type='submit' value='Add Phone' ng-disabled='phoneForm.$invalid'>
      </div>
    </form>
  </div>
</section>
